<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adora | Add Product</title>
    <link rel="icon" href="../imges/icon.png">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <section id="header">
        <a href="#"><img src="../imges/ADORA LOGO-preview.png" class="logo" alt="logo"></a>
        <div>
            <ul id="navbar">
                <li><a href="../index.html">Home</a></li>
                <li><a href="shop.html">Products</a></li>
                <li><a href="about.html">About</a></li>
                <li><a class="active" href="add-product.html">Add Product</a></li>
                <li id="lg-bag"><a href="cart.html"><i class="fa-solid fa-bag-shopping"></i> <span class="cart-count badge bg-danger">0</span></a></li>
                <a href="#" id="close"><i class="far fa-times"></i></a>
            </ul>
        </div>
        <div id="mobile">
            <a href="cart.html"><i class="fa-solid fa-bag-shopping"></i></a>
            <i id="bar" class="fas fa-outdent"></i>
        </div>
    </section>

    <section class="py-5" style="min-height: 80vh;">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 col-md-10">
                    <div class="card shadow-lg border-0">
                        <div class="card-header bg-primary text-white text-center">
                            <h2 class="mb-0">
                                <i class="fas fa-plus-circle me-2"></i>Add New Product
                            </h2>
                        </div>
                        <div class="card-body p-4">
                            <form id="addProductForm">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="productName" class="form-label">
                                            <i class="fas fa-tag me-2"></i>Product Name *
                                        </label>
                                        <input type="text" class="form-control" id="productName" name="name" required>
                                        <div class="invalid-feedback">Please provide a product name.</div>
                                    </div>
                                    
                                    <div class="col-md-6 mb-3">
                                        <label for="productPrice" class="form-label">
                                            <i class="fas fa-dollar-sign me-2"></i>Price *
                                        </label>
                                        <input type="number" class="form-control" id="productPrice" name="price" step="0.01" min="0" required>
                                        <div class="invalid-feedback">Please provide a valid price.</div>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <label for="productImage" class="form-label">
                                        <i class="fas fa-image me-2"></i>Image URL *
                                    </label>
                                    <input type="url" class="form-control" id="productImage" name="image" required>
                                    <div class="form-text">Enter a valid image URL (e.g., https://example.com/image.jpg)</div>
                                    <div class="invalid-feedback">Please provide a valid image URL.</div>
                                </div>
                                
                                <div class="mb-4">
                                    <label class="form-label">Preview</label>
                                    <div class="border rounded p-3 bg-light text-center" id="imagePreview">
                                        <i class="fas fa-image fa-3x text-muted mb-2"></i>
                                        <p class="text-muted mb-0">Image preview will appear here</p>
                                    </div>
                                </div>
                                
                                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                    <button type="button" class="btn btn-secondary me-md-2" onclick="resetForm()">
                                        <i class="fas fa-undo me-2"></i>Reset
                                    </button>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-plus me-2"></i>Add Product
                                    </button>
                                </div>
                            </form>
                            
                            <hr class="my-4">
                            
                            <div class="text-center">
                                <p class="text-muted mb-3">Quick Actions</p>
                                <a href="shop.html" class="btn btn-outline-primary me-2">
                                    <i class="fas fa-eye me-2"></i>View Products
                                </a>
                                <a href="cart.html" class="btn btn-outline-success">
                                    <i class="fas fa-shopping-cart me-2"></i>View Cart
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="footer-container">
            <div class="footer-about">
                <div class="footer-logo">Adora</div>
                <p>ADORA is an e-commerce startup in Egypt, run by a passionate team, and supported by creative designers and skilled sellers to produce the best products for our shoppers.</p>
            </div>
            <div class="footer-links">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="#">Contact</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Return Policy</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h4>Work With Us</h4>
                <ul>
                    <li><a href="#">Affiliate Signup</a></li>
                    <li><a href="#">Referral Signup</a></li>
                    <li><a href="#">Designer Signup</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h4>My Account</h4>
                <ul>
                    <li><a href="cart.html">View Cart</a></li>
                    <li><a href="login.html">Login</a></li>
                    <li><a href="#">Signup</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            <p>@ 2025. ADORA rights reserved.</p>
        </div>
    </footer>

     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/product-manager.js"></script>
    <script src="../js/main.js"></script>
    
    <script>
         document.getElementById('productImage').addEventListener('input', function() {
            const imageUrl = this.value;
            const previewDiv = document.getElementById('imagePreview');
            
            if (imageUrl) {
                previewDiv.innerHTML = `
                    <img src="${imageUrl}" alt="Product Preview" 
                         class="img-fluid rounded" style="max-height: 200px;"
                         onerror="this.parentElement.innerHTML='<i class=\\'fas fa-exclamation-triangle fa-2x text-warning mb-2\\'></i><p class=\\'text-warning mb-0\\'>Invalid image URL</p>'">
                `;
            } else {
                previewDiv.innerHTML = `
                    <i class="fas fa-image fa-3x text-muted mb-2"></i>
                    <p class="text-muted mb-0">Image preview will appear here</p>
                `;
            }
        });

         document.getElementById('addProductForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const product = {
                name: formData.get('name'),
                price: formData.get('price'),
                image: formData.get('image')
            };
            
             this.querySelectorAll('.form-control').forEach(input => {
                input.classList.remove('is-invalid');
            });
            
             let isValid = true;
            
            if (!product.name.trim()) {
                document.getElementById('productName').classList.add('is-invalid');
                isValid = false;
            }
            
            if (!product.price || parseFloat(product.price) <= 0) {
                document.getElementById('productPrice').classList.add('is-invalid');
                isValid = false;
            }
            
            if (!product.image.trim()) {
                document.getElementById('productImage').classList.add('is-invalid');
                isValid = false;
            }
            
            if (!isValid) {
                Swal.fire({
                    icon: 'error',
                    title: 'Validation Error',
                    text: 'Please fill in all required fields correctly',
                    confirmButtonColor: '#6c757d'
                });
                return;
            }
            
             if (window.productManager) {
                const newProduct = window.productManager.addProduct(product);
                
                Swal.fire({
                    icon: 'success',
                    title: 'Product Added Successfully!',
                    text: `${product.name} has been added to the store`,
                    confirmButtonColor: '#0d6efd',
                    showCancelButton: true,
                    cancelButtonText: 'Add Another',
                    confirmButtonText: 'View Products'
                }).then((result) => {
                    if (result.isConfirmed) {
                        window.location.href = 'shop.html';
                    } else {
                        resetForm();
                    }
                });
            }
        });

         function resetForm() {
            document.getElementById('addProductForm').reset();
            document.getElementById('imagePreview').innerHTML = `
                <i class="fas fa-image fa-3x text-muted mb-2"></i>
                <p class="text-muted mb-0">Image preview will appear here</p>
            `;
            document.querySelectorAll('.form-control').forEach(input => {
                input.classList.remove('is-invalid');
            });
        }

         document.addEventListener('DOMContentLoaded', function() {
            if (window.cartManager) {
                window.cartManager.updateCartDisplay();
            }
        });
    </script>
</body>
</html>
